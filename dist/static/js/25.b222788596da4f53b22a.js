webpackJsonp([25],{"8xkQ":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("hRKE"),s=r.n(a),n=r("lC5x"),i=r.n(n),o=r("J0Oq"),c=r.n(o),u=r("4YfN"),d=r.n(u),l=r("Ty/O"),p=r("Llv5"),h=r("0w2Z"),v=r("0xDb"),f=r("T726"),m=r("fUgm"),g="BargainDetails",_={name:g,inject:["reload"],components:{ProductConSwiper:function(){return r.e(56).then(r.bind(null,"ncqS"))},CountDown:function(){return r.e(66).then(r.bind(null,"kPQs"))},ProductWindow:function(){return r.e(64).then(r.bind(null,"Ik14"))},StorePoster:function(){return r.e(55).then(r.bind(null,"zLQN"))},ProgressBar:function(){return r.e(63).then(r.bind(null,"KcW0"))}},props:{},data:function(){return{domStatus:!1,posterData:{image:"",title:"",price:"",code:""},posterImageStatus:!1,action:"",imgUrls:[],storeInfo:{},replyCount:0,reply:[],cartNum:1,attr:{cartAttr:!1,productSelect:{image:"",store_name:"",price:"",stock:"",unique:"",cart_num:1}},datatime:0,courseLogo:"",isHelped:!1}},watch:{$route:function(t){console.log(t),t.name===g&&this.mountedStart()}},mounted:function(){this.mountedStart()},computed:d()({},Object(m.b)(["userNo"])),methods:{mountedStart:function(){var t=this;return c()(i.a.mark(function e(){var r,a,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(r=t).$route.params.id,e.next=4,Object(l.c)({id:a});case 4:if(s=e.sent,r.storeInfo=s.data,r.datatime=Date.parse(r.storeInfo.addTime)+864e5,r.courseLogo=r.storeInfo.courseViewDTO.courseLogo,t.$nextTick(function(){this.numberGrow(this.$refs.numberGrow,r.storeInfo)}),t.isHelped=!1,r.storeInfo.uid===r.userNo){e.next=15;break}return e.next=13,Object(l.d)({uid:r.userNo,bargainUserId:r.storeInfo.bargainUserId});case 13:e.sent.data&&(t.isHelped=!0);case 15:case"end":return e.stop()}},e,t)}))()},setShare:function(){Object(v.d)()&&Object(f.openShareAll)({desc:"是兄弟，就来砍我",title:"是兄弟，就来砍我",link:location.href,imgUrl:this.storeInfo.courseViewDTO.courseLogo})},getImageBase64:function(){var t=this;Object(h.k)(this.posterData.image,t.posterData.code).then(function(e){t.posterData.image=e.data.image,t.posterData.code=e.data.code})},updateTitle:function(){document.title=this.storeInfo.title||this.$route.meta.title},setPosterImageStatus:function(){(document.body||document.documentElement).scrollTop=0,this.posterImageStatus=!this.posterImageStatus},changeFun:function(t){"object"!==(void 0===t?"undefined":s()(t))&&(t={});var e=t.action||"",r=void 0===t.value?"":t.value;this[e]&&this[e](r)},changeattr:function(t){this.attr.cartAttr=t},ChangeCartNum:function(t){t?this.attr.productSelect.cart_num<this.storeInfo.stock&&this.attr.productSelect.cart_num++:this.attr.productSelect.cart_num>1&&this.attr.productSelect.cart_num--},setProductSelect:function(){var t=this.attr;t.productSelect.image=this.storeInfo.image,t.productSelect.store_name=this.storeInfo.title,t.productSelect.price=this.storeInfo.price,t.productSelect.stock=this.storeInfo.stock,t.cartAttr=!1,this.$set(this,"attr",t)},selecAttrTap:function(){this.cartAttr=!0},tapBuy:function(){var t=this,e=this;if(0==e.attr.cartAttr)e.attr.cartAttr=!this.attr.attrcartAttr;else{var r={};r.productId=e.storeInfo.product_id,r.cartNum=e.attr.productSelect.cart_num,r.uniqueId=e.attr.productSelect.unique,r.secKillId=e.storeInfo.id,r.new=1,Object(p.o)(r).then(function(t){e.$router.push({path:"/order/submit/"+t.data.cartId})}).catch(function(e){t.$dialog.error(e.msg)})}},numberGrow:function(t,e){var r=10*e.price/2e3,a=0,s=0,n=setInterval(function(){(s+=r)>e.price&&(clearInterval(n),s=e.price,n=null),a!==s&&(a=s,t.innerHTML=a.toFixed(2).toString().replace(/(\d)(?=(?:\d{3}[+]?)+$)/g,"$1,"))},10)},helpBargain:function(){var t=this;Object(l.j)({id:this.storeInfo.id,userNo:this.userNo}).then(function(e){200===e.code?t.mountedStart():t.$dialog.error(e.msg)}).catch(function(e){t.$dialog.error(e.msg)})},toBargain:function(){this.$router.push({path:"/category"})}}},I={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bargainDetail"},[r("div",{staticClass:"banner"},[r("img",{attrs:{src:t.courseLogo}})]),t._v(" "),r("div",{staticClass:"container"},[r("div",{staticClass:"container-title"},[r("div",{staticClass:"container-bg"},[1===t.storeInfo.status?r("div",{staticClass:"countdown_dashboard"},[r("CountDown",{attrs:{"is-day":!1,"tip-text":"","day-text":"","hour-text":":","minute-text":":","second-text":"",datatime:t.datatime/1e3}}),t._v(" "),r("div",[t._v(" 后过期")])],1):r("div",{staticClass:"countdown_dashboard"},[r("div",[t._v("砍价已经结束")])])])]),t._v(" "),r("div",{staticClass:"wrapper"},[t.isHelped?r("div",{staticClass:"wrapper-text"},[t._v("\n        已帮助好友砍价，你也去免费拿吧\n      ")]):r("div",{staticClass:"wrapper-text"},[t._v("\n        已砍"),r("span",{ref:"numberGrow",staticStyle:{"font-size":"18px",color:"#e93323"}},[t._v(t._s(t.storeInfo.price))]),t._v("，仅差"),r("span",{staticStyle:{"font-size":"18px",color:"#e93323"}},[t._v(t._s((100*(1-t.storeInfo.price/t.storeInfo.bargainPrice)).toFixed(2))+"%")]),t._v("免费拿\n      ")]),t._v(" "),r("div",{staticClass:"votebox"},[r("ProgressBar",{attrs:{color:"#eb0000",height:10,percentage:t.storeInfo.price/t.storeInfo.bargainPrice*100}})],1)]),t._v(" "),r("div",{staticClass:"price-btn"},[t.storeInfo.uid===t.userNo?r("div",{staticClass:"right chop",on:{click:t.setShare}},[t._v("邀请好友帮砍一刀")]):r("div",{staticClass:"right chop",on:{click:t.helpBargain}},[t._v("帮好友砍一刀")]),t._v(" "),t.storeInfo.uid!==t.userNo&&t.isHelped?r("div",{staticClass:"right chop",on:{click:t.toBargain}},[t._v("发起砍价免费拿")]):t._e()])]),t._v(" "),r("div",{staticClass:"container"},[t._m(0),t._v(" "),r("div",{staticClass:"container-record"},t._l(t.storeInfo.bargainUserHelpDTOList,function(e,a){return r("div",{key:a,staticClass:"container-list"},[r("img",{attrs:{src:e.userExtVO.headImgUrl}}),t._v(" "),r("span",{staticClass:"nick"},[t._v(t._s(e.userExtVO.nickname))]),t._v(" "),r("span",{staticClass:"bargained"},[r("div",[t._v("砍掉"+t._s(e.price)+"元")])])])}),0)]),t._v(" "),t._m(1),t._v(" "),r("ProductWindow",{attrs:{attr:t.attr},on:{changeFun:t.changeFun}}),t._v(" "),r("StorePoster",{attrs:{posterImageStatus:t.posterImageStatus,posterData:t.posterData},on:{setPosterImageStatus:t.setPosterImageStatus}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-title"},[e("span",{staticClass:"container-item"},[this._v("砍价记录")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"container-title"},[e("div",{staticClass:"container-bg"},[this._v("活动规则")])]),this._v(" "),e("div",{staticClass:"container-rule"},[e("p",[this._v("1.邀请好友帮忙砍价，在24小时内砍价金额砍到0元，成功后即可获得该商品")]),this._v(" "),e("p",[this._v("2.若没有在24小时内砍到0元，则砍价失败")]),this._v(" "),e("p",[this._v("3.所有解释权归商家所有")])])])}]};var b=r("C7Lr")(_,I,!1,function(t){r("ipe+")},"data-v-f9c5cf4a",null);e.default=b.exports},"ipe+":function(t,e){}});
//# sourceMappingURL=25.b222788596da4f53b22a.js.map