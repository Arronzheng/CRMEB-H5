{"version":3,"sources":["webpack:///src/views/user/Recharge.vue","webpack:///./src/views/user/Recharge.vue?c77c","webpack:///./src/views/user/Recharge.vue"],"names":["Recharge","name","components","props","data","navRecharge","active","payType","from","Object","utils","money","now_money","computed","vuex_esm","mounted","this","userInfo","methods","navRecharges","index","recharge","_this","that","price","Number","$dialog","toast","mes","confirm","title","opts","txt","color","callback","user","type","then","res","bc","parseInt","brokerage_price","msg","catch","location","replace","mweb_url","$router","path","wechat","finally","user_Recharge","render","_vm","_h","$createElement","_c","_self","staticClass","_l","item","key","class","on","click","$event","_v","_s","directives","rawName","value","expression","attrs","placeholder","domProps","input","target","composing","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/33.0a01943a65594afd07b4.js","sourcesContent":["<template>\n  <div>\n    <div class=\"recharge\">\n      <div class=\"nav acea-row row-around row-middle\">\n        <div\n          class=\"item\"\n          :class=\"active === index ? 'on' : ''\"\n          v-for=\"(item, index) in navRecharge\"\n          :key=\"index\"\n          @click=\"navRecharges(index)\"\n        >\n          {{ item }}\n        </div>\n      </div>\n      <div class=\"info-wrapper\">\n        <div class=\"money\">\n          <span>￥</span>\n          <input type=\"number\" placeholder=\"0.00\" v-model=\"money\" />\n        </div>\n        <div class=\"tips\" v-if=\"!active\">\n          提示：当前余额为<span>￥{{ now_money || 0 }}</span>\n        </div>\n        <div class=\"tips\" v-else>\n          提示：当前佣金为<span>￥{{ userInfo.brokerage_price || 0 }}</span>\n        </div>\n        <div class=\"pay-btn bg-color-red\" @click=\"recharge\">\n          {{ active ? \"立即转入\" : \"立即充值\" }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapGetters } from \"vuex\";\nimport { pay } from \"@libs/wechat\";\nimport { isWeixin } from \"@utils\";\nimport { rechargeWechat } from \"@api/user\";\nimport { add, sub } from \"@utils/bc\";\n\nexport default {\n  name: \"Recharge\",\n  components: {},\n  props: {},\n  data: function() {\n    return {\n      navRecharge: [\"账户充值\", \"佣金导入\"],\n      active: 0,\n      payType: [\"weixin\"],\n      from: isWeixin() ? \"weixin\" : \"weixinh5\",\n      money: \"\",\n      now_money: \"\"\n    };\n  },\n  computed: mapGetters([\"userInfo\"]),\n  mounted: function() {\n    this.now_money = this.userInfo.now_money;\n  },\n  methods: {\n    navRecharges: function(index) {\n      this.active = index;\n    },\n    recharge: function() {\n      let that = this,\n        price = Number(this.money);\n      if (that.active) {\n        if (price === 0) {\n          return that.$dialog.toast({ mes: \"请输入您要转入的金额\" });\n        } else if (price < 0.01) {\n          return that.$dialog.toast({ mes: \"转入金额不能低于0.01\" });\n        }\n        this.$dialog.confirm({\n          mes: \"转入余额无法在转出，请确认转入\",\n          title: \"转入余额\",\n          opts: [\n            {\n              txt: \"确认\",\n              color: false,\n              callback: () => {\n                rechargeWechat({ price: price, from: that.from, type: 1 })\n                  .then(res => {\n                    that.now_money = add(\n                      price,\n                      parseInt(that.userInfo.now_money)\n                    );\n                    that.userInfo.brokerage_price = sub(\n                      that.userInfo.brokerage_price,\n                      price\n                    );\n                    that.money = \"\";\n                    return that.$dialog.toast({ mes: res.msg });\n                  })\n                  .catch(res => {\n                    that.$dialog.toast({ mes: res.msg });\n                  });\n              }\n            },\n            {\n              txt: \"取消\",\n              color: false,\n              callback: () => {\n                return that.$dialog.toast({ mes: \"已取消\" });\n              }\n            }\n          ]\n        });\n      } else {\n        if (price === 0) {\n          return that.$dialog.toast({ mes: \"请输入您要充值的金额\" });\n        } else if (price < 0.01) {\n          return that.$dialog.toast({ mes: \"充值金额不能低于0.01\" });\n        }\n        rechargeWechat({ price: price, from: that.from })\n          .then(res => {\n            var data = res.data;\n            if (data.type == \"weixinh5\") {\n              location.replace(data.data.mweb_url);\n              this.$dialog.confirm({\n                mes: \"充值余额\",\n                opts: [\n                  {\n                    txt: \"已充值\",\n                    color: false,\n                    callback: () => {\n                      that.$router.replace({\n                        path: \"/user/account\"\n                      });\n                    }\n                  },\n                  {\n                    txt: \"查看余额\",\n                    color: false,\n                    callback: () => {\n                      that.$router.replace({\n                        path: \"/user/account\"\n                      });\n                    }\n                  }\n                ]\n              });\n            } else {\n              pay(data.data)\n                .finally(() => {\n                  that.now_money = add(\n                    price,\n                    parseInt(that.userInfo.now_money)\n                  );\n                  that.$dialog.toast({ mes: \"支付成功\" });\n                })\n                .catch(function() {\n                  that.$dialog.toast({ mes: \"支付失败\" });\n                });\n            }\n          })\n          .catch(res => {\n            that.$dialog.toast({ mes: res.msg });\n          });\n      }\n    }\n  }\n};\n</script>\n<style scoped>\n#iframe {\n  display: none;\n}\n.recharge {\n  width: 7.03rem;\n  padding: 0.5rem 0.63rem 0.45rem;\n  background-color: #fff;\n  margin: 0.2rem auto 0 auto;\n  border-radius: 0.1rem;\n}\n.recharge .nav {\n  height: 0.75rem;\n  line-height: 0.75rem;\n  padding: 0 1rem;\n}\n.recharge .nav .item {\n  font-size: 0.3rem;\n  color: #333;\n}\n.recharge .nav .item.on {\n  font-weight: bold;\n  border-bottom: 0.04rem solid #e83323;\n}\n.recharge .info-wrapper {\n  text-align: center;\n}\n.recharge .info-wrapper .money {\n  margin-top: 0.6rem;\n  padding-bottom: 0.2rem;\n  border-bottom: 1px dashed #ddd;\n}\n.recharge .info-wrapper .money span {\n  font-size: 0.56rem;\n  color: #333;\n  font-weight: bold;\n}\n.recharge .info-wrapper .money input {\n  display: inline-block;\n  width: 3rem;\n  font-size: 0.84rem;\n  text-align: center;\n  color: #282828;\n  font-weight: bold;\n  padding-right: 0.7rem;\n}\n.recharge .info-wrapper .money input::placeholder {\n  color: #ddd;\n}\n.recharge .info-wrapper .money input::-webkit-input-placeholder {\n  color: #ddd;\n}\n.recharge .info-wrapper .money input:-moz-placeholder {\n  color: #ddd;\n}\n.recharge .info-wrapper .money input::-moz-placeholder {\n  color: #ddd;\n}\n.recharge .info-wrapper .money input:-ms-input-placeholder {\n  color: #ddd;\n}\n.recharge .info-wrapper .tips {\n  font-size: 0.26rem;\n  color: #888;\n  margin: 0.25rem auto 0 auto;\n  line-height: 1.5;\n  padding: 0 0.3rem;\n}\n.recharge .info-wrapper .tips span {\n  color: #ef4a49;\n}\n.recharge .info-wrapper .pay-btn {\n  display: block;\n  width: 5.5rem;\n  height: 0.86rem;\n  margin: 0.5rem auto 0 auto;\n  line-height: 0.86rem;\n  text-align: center;\n  color: #fff;\n  border-radius: 0.5rem;\n  font-size: 0.3rem;\n  font-weight: bold;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/Recharge.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"recharge\"},[_c('div',{staticClass:\"nav acea-row row-around row-middle\"},_vm._l((_vm.navRecharge),function(item,index){return _c('div',{key:index,staticClass:\"item\",class:_vm.active === index ? 'on' : '',on:{\"click\":function($event){return _vm.navRecharges(index)}}},[_vm._v(\"\\n        \"+_vm._s(item)+\"\\n      \")])}),0),_vm._v(\" \"),_c('div',{staticClass:\"info-wrapper\"},[_c('div',{staticClass:\"money\"},[_c('span',[_vm._v(\"￥\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.money),expression:\"money\"}],attrs:{\"type\":\"number\",\"placeholder\":\"0.00\"},domProps:{\"value\":(_vm.money)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.money=$event.target.value}}})]),_vm._v(\" \"),(!_vm.active)?_c('div',{staticClass:\"tips\"},[_vm._v(\"\\n        提示：当前余额为\"),_c('span',[_vm._v(\"￥\"+_vm._s(_vm.now_money || 0))])]):_c('div',{staticClass:\"tips\"},[_vm._v(\"\\n        提示：当前佣金为\"),_c('span',[_vm._v(\"￥\"+_vm._s(_vm.userInfo.brokerage_price || 0))])]),_vm._v(\" \"),_c('div',{staticClass:\"pay-btn bg-color-red\",on:{\"click\":_vm.recharge}},[_vm._v(\"\\n        \"+_vm._s(_vm.active ? \"立即转入\" : \"立即充值\")+\"\\n      \")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-01e6b6da\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/user/Recharge.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-01e6b6da\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Recharge.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Recharge.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Recharge.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-01e6b6da\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Recharge.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-01e6b6da\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/Recharge.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}