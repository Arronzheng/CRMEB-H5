webpackJsonp([28],{cKsb:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=i("vMJZ"),a=i("HPEA"),e={name:"Sign",components:{},props:{},data:function(){return{userInfo:{},integral:0,signCount:[],sign_index:0,signSystemList:[],signList:[],page:1,limit:3,active:!1,day:""}},mounted:function(){this.signUser(),this.signConfig(),this.getSignList()},methods:{PrefixInteger:function(t,s){return(Array(s).join("0")+t).slice(-s).split("")},Rp:function(t){var s=["零","一","二","三","四","五","六","七","八","九"],i="";t=""+t;for(var n=0;n<t.length;n++)i+=s[parseInt(t.charAt(n))];return i},signUser:function(){var t=this;Object(n.U)({sign:1}).then(function(s){s.data.integral=parseInt(s.data.integral);var i=s.data.sum_sgin_day;t.userInfo=s.data,t.signCount=t.PrefixInteger(i,4),t.sign_index=parseInt(s.data.sign_num)})},signConfig:function(){var t=this;Object(n.C)().then(function(s){t.signSystemList=s.data,t.day=t.Rp(t.signSystemList.length)})},goSign:function(){var t=this,s=t.userInfo.sum_sgin_day;if(t.userInfo.is_day_sgin)return t.$dialog.toast({mes:"您今日已签到!"});Object(n.T)().then(function(i){t.active=!0,t.integral=i.data.integral;var n=parseInt(t.sign_index+1);t.sign_index=n>t.signSystemList.length?1:n,t.signCount=t.PrefixInteger(s+1,4),t.userInfo.is_day_sgin=!0,t.userInfo.integral=Object(a.a)(t.userInfo.integral,i.data.integral),t.getSignList()})},getSignList:function(){var t=this;Object(n.D)(t.page,t.limit).then(function(s){t.signList=s.data})},close:function(){this.active=!1}}},r={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"sign"},[i("div",{staticClass:"header bg-color-red"},[i("div",{staticClass:"headerCon acea-row row-between-wrapper"},[i("div",{staticClass:"left acea-row row-between-wrapper"},[i("div",{staticClass:"pictrue"},[i("img",{attrs:{src:t.userInfo.avatar}})]),t._v(" "),i("div",{staticClass:"text"},[i("div",{staticClass:"line1"},[t._v(t._s(t.userInfo.nickname))]),t._v(" "),i("div",{staticClass:"integral acea-row"},[i("span",[t._v("积分: "+t._s(t.userInfo.integral))])])])]),t._v(" "),i("router-link",{staticClass:"right acea-row row-middle",attrs:{to:"/user/sign_record"}},[i("div",{staticClass:"iconfont icon-caidan"}),t._v(" "),i("div",[t._v("明细")])])],1)]),t._v(" "),i("div",{staticClass:"wrapper"},[i("div",{staticClass:"list acea-row row-between-wrapper"},t._l(t.signSystemList,function(s,n){return i("div",{key:n,staticClass:"item"},[i("div",{class:n+1===t.signSystemList.length?"rewardTxt":""},[t._v("\n          "+t._s(s.day)+"\n        ")]),t._v(" "),i("div",{staticClass:"venus",class:(n+1===t.signSystemList.length?"reward":"")+" "+(t.sign_index>=n+1?"venusSelect":"")}),t._v(" "),i("div",{staticClass:"num",class:t.sign_index>=n+1?"on":""},[t._v("\n          +"+t._s(s.sign_num)+"\n        ")])])}),0),t._v(" "),i("div",{staticClass:"but bg-color-red",class:t.userInfo.is_day_sgin?"on":"",on:{click:t.goSign}},[t._v("\n      "+t._s(t.userInfo.is_day_sgin?"已签到":"立即签到")+"\n    ")]),t._v(" "),i("div",{staticClass:"lock"})]),t._v(" "),i("div",{staticClass:"wrapper wrapper2"},[i("div",{staticClass:"tip"},[t._v("已累计签到")]),t._v(" "),i("div",{staticClass:"list2 acea-row row-center row-bottom"},[t._l(t.signCount,function(s,n){return i("div",{key:n,staticClass:"item"},[t._v("\n        "+t._s(s||0)+"\n      ")])}),t._v(" "),i("div",{staticClass:"data"},[t._v("天")])],2),t._v(" "),i("div",{staticClass:"tip2"},[t._v("\n      据说连续签到第"+t._s(t.day)+"天可获得超额积分，一定要坚持签到哦~~~\n    ")]),t._v(" "),i("div",{staticClass:"list3"},[t._l(t.signList,function(s,n){return i("div",{key:n,staticClass:"item acea-row row-between-wrapper"},[i("div",[i("div",{staticClass:"name line1"},[t._v(t._s(s.title))]),t._v(" "),i("div",{staticClass:"data"},[t._v(t._s(s.add_time))])]),t._v(" "),i("div",{staticClass:"num font-color-red"},[t._v("+"+t._s(s.number))])])}),t._v(" "),t.signList.length>0?i("router-link",{staticClass:"Loads acea-row row-center-wrapper",attrs:{to:"/user/sign_record"}},[t._v("\n        点击加载更多\n        "),i("div",{staticClass:"iconfont icon-xiangyou acea-row row-center-wrapper"})]):t._e()],2)]),t._v(" "),i("div",{staticClass:"signTip acea-row row-center-wrapper",class:!0===t.active?"on":""},[i("div",{staticClass:"signTipLight loadingpic"}),t._v(" "),i("div",{staticClass:"signTipCon"},[i("div",{staticClass:"state"},[t._v("签到成功")]),t._v(" "),i("div",{staticClass:"integral"},[t._v("获得"+t._s(t.integral)+"积分")]),t._v(" "),i("div",{staticClass:"signTipBnt",on:{click:t.close}},[t._v("好的")])])]),t._v(" "),i("div",{staticClass:"mask",attrs:{hidden:!1===t.active},on:{touchmove:function(t){t.preventDefault()}}})])},staticRenderFns:[]};var c=i("C7Lr")(e,r,!1,function(t){i("kqqj")},"data-v-92f84a0a",null);s.default=c.exports},kqqj:function(t,s){}});
//# sourceMappingURL=28.551f560b27caeebdba1d.js.map