{"version":3,"sources":["webpack:///src/views/user/BindingPhone.vue","webpack:///./src/views/user/BindingPhone.vue?f123","webpack:///./src/views/user/BindingPhone.vue","webpack:///./src/mixins/SendVerifyCode.js"],"names":["BindingPhone","name","components","props","data","captcha","phone","mixins","SendVerifyCode","computed","Object","vuex_esm","mounted","methods","confirm","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","that","wrap","_context","prev","next","$validator","validate","message","t0","abrupt","dialog","user","then","res","undefined","is_bind","$dialog","mes","msg","opts","txt","color","callback","step","success","$router","replace","catch","error","stop","code","_this2","_callee2","_context2","sendCode","user_BindingPhone","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","value","expression","attrs","type","placeholder","domProps","on","input","$event","target","composing","_v","class","disabled","click","_s","text","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","n","run","setInterval","clearInterval"],"mappings":"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","file":"static/js/34.2b966cff7d7ec5332848.js","sourcesContent":["<template>\n  <div class=\"ChangePassword\">\n    <div class=\"list\">\n      <div class=\"item\">\n        <input type=\"number\" placeholder=\"填写手机号码\" v-model=\"phone\" />\n      </div>\n      <div class=\"item acea-row row-between-wrapper\">\n        <input\n          type=\"text\"\n          placeholder=\"填写验证码\"\n          class=\"codeIput\"\n          v-model=\"captcha\"\n        />\n        <button\n          class=\"code font-color-red\"\n          :disabled=\"disabled\"\n          :class=\"disabled === true ? 'on' : ''\"\n          @click=\"code\"\n        >\n          {{ text }}\n        </button>\n      </div>\n    </div>\n    <div class=\"confirmBnt bg-color-red\" @click=\"confirm\">确认绑定</div>\n  </div>\n</template>\n<script>\nimport { mapGetters } from \"vuex\";\nimport sendVerifyCode from \"@mixins/SendVerifyCode\";\nimport { required, alpha_num, chs_phone } from \"@utils/validate\";\nimport { validatorDefaultCatch } from \"@utils/dialog\";\nimport { registerVerify, bindingPhone } from \"@api/user\";\n\nexport default {\n  name: \"BindingPhone\",\n  components: {},\n  props: {},\n  data: function() {\n    return {\n      captcha: \"\",\n      phone: \"\" //手机号\n    };\n  },\n  mixins: [sendVerifyCode],\n  computed: mapGetters([\"userInfo\"]),\n  mounted: function() {},\n  methods: {\n    async confirm() {\n      let that = this;\n      const { phone, captcha } = that;\n      try {\n        await that\n          .$validator({\n            phone: [\n              chs_phone(chs_phone.message(\"手机号码\")),\n              alpha_num(alpha_num.message())\n            ],\n            captcha: [\n              required(required.message(\"验证码\")),\n              alpha_num(alpha_num.message(\"验证码\"))\n            ]\n          })\n          .validate({ phone, captcha });\n      } catch (e) {\n        return validatorDefaultCatch(e);\n      }\n      bindingPhone({\n        phone: this.phone,\n        captcha: this.captcha\n      })\n        .then(res => {\n          if (res.data !== undefined && res.data.is_bind) {\n            that.$dialog.confirm({\n              mes: res.msg,\n              opts: [\n                {\n                  txt: \"确认绑定\",\n                  color: false,\n                  callback: () => {\n                    bindingPhone({\n                      phone: this.phone,\n                      captcha: this.captcha,\n                      step: 1\n                    })\n                      .then(res => {\n                        that.$dialog.success(res.msg).then(() => {\n                          that.$router.replace({ name: \"PersonalData\" });\n                        });\n                      })\n                      .catch(res => {\n                        that.$dialog.error(res.msg).then(() => {\n                          that.$router.replace({ name: \"PersonalData\" });\n                        });\n                      });\n                  }\n                },\n                {\n                  txt: \"取消\",\n                  color: false,\n                  callback: () => {\n                    that.$dialog.error(\"已取消绑定\").then(() => {\n                      that.$router.replace({ name: \"PersonalData\" });\n                    });\n                  }\n                }\n              ]\n            });\n          } else {\n            that.$dialog.success(res.msg).then(() => {\n              that.$router.replace({ name: \"PersonalData\" });\n            });\n          }\n        })\n        .catch(res => {\n          that.$dialog.error(res.msg);\n        });\n    },\n    async code() {\n      let that = this;\n      const { phone } = that;\n      try {\n        await that\n          .$validator({\n            phone: [\n              required(required.message(\"手机号码\")),\n              chs_phone(chs_phone.message())\n            ]\n          })\n          .validate({ phone });\n      } catch (e) {\n        return validatorDefaultCatch(e);\n      }\n\n      registerVerify({ phone: phone })\n        .then(res => {\n          that.$dialog.success(res.msg);\n          that.sendCode();\n        })\n        .catch(res => {\n          that.$dialog.error(res.msg);\n        });\n    }\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/BindingPhone.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ChangePassword\"},[_c('div',{staticClass:\"list\"},[_c('div',{staticClass:\"item\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.phone),expression:\"phone\"}],attrs:{\"type\":\"number\",\"placeholder\":\"填写手机号码\"},domProps:{\"value\":(_vm.phone)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.phone=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"item acea-row row-between-wrapper\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.captcha),expression:\"captcha\"}],staticClass:\"codeIput\",attrs:{\"type\":\"text\",\"placeholder\":\"填写验证码\"},domProps:{\"value\":(_vm.captcha)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.captcha=$event.target.value}}}),_vm._v(\" \"),_c('button',{staticClass:\"code font-color-red\",class:_vm.disabled === true ? 'on' : '',attrs:{\"disabled\":_vm.disabled},on:{\"click\":_vm.code}},[_vm._v(\"\\n        \"+_vm._s(_vm.text)+\"\\n      \")])])]),_vm._v(\" \"),_c('div',{staticClass:\"confirmBnt bg-color-red\",on:{\"click\":_vm.confirm}},[_vm._v(\"确认绑定\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-cf2f6138\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/user/BindingPhone.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./BindingPhone.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./BindingPhone.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cf2f6138\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./BindingPhone.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/BindingPhone.vue\n// module id = null\n// module chunks = ","export default {\n  data() {\n    return {\n      disabled: false,\n      text: \"获取验证码\"\n    };\n  },\n  methods: {\n    sendCode() {\n      if (this.disabled) return;\n      this.disabled = true;\n      let n = 60;\n      this.text = \"剩余 \" + n + \"s\";\n      const run = setInterval(() => {\n        n = n - 1;\n        if (n < 0) {\n          clearInterval(run);\n        }\n        this.text = \"剩余 \" + n + \"s\";\n        if (this.text < \"剩余 \" + 0 + \"s\") {\n          this.disabled = false;\n          this.text = \"重新获取\";\n        }\n      }, 1000);\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/mixins/SendVerifyCode.js"],"sourceRoot":""}