{"version":3,"sources":["webpack:///src/views/user/coupon/GetCoupon.vue","webpack:///./src/views/user/coupon/GetCoupon.vue?6cd4","webpack:///./src/views/user/coupon/GetCoupon.vue"],"names":["GetCoupon","name","components","Loading","props","data","page","limit","couponsList","loading","loadend","mounted","_this","this","getUseCoupons","$scroll","$refs","container","methods","getCoupon","id","index","that","list","Object","user","then","is_use","$dialog","toast","mes","catch","res","msg","q","push","apply","length","coupon_GetCoupon","render","_vm","_h","$createElement","_c","_self","ref","staticClass","_l","item","key","class","_v","_s","coupon_price","use_min_price","end_time","start_time","on","click","$event","_e","attrs","loaded","_m","staticRenderFns","src","__webpack_require__","Component","normalizeComponent","__webpack_exports__"],"mappings":"wHAkDAA,GACAC,KAAA,YACAC,YACAC,kBAAA,GAEAC,SACAC,KAAA,WACA,OACAC,KAAA,EACAC,MAAA,GACAC,eACAC,SAAA,EACAC,SAAA,IAGAC,QAAA,eAAAC,EAAAC,KACAA,KAAAC,gBACAD,KAAAE,QAAAF,KAAAG,MAAAC,UAAA,YACAL,EAAAH,SAAAG,EAAAE,mBAGAI,SACAC,UAAA,SAAAC,EAAAC,GACA,IAAAC,EAAAT,KACAU,EAAAD,EAAAd,YACMgB,OAAAC,EAAA,EAAAD,CAANJ,GACAM,KAAA,WACAH,EAAAF,GAAAM,QAAA,EACAL,EAAAM,QAAAC,OAAAC,IAAA,WAEAC,MAAA,SAAAC,GACAV,EAAAM,QAAAC,OAAAC,IAAAE,EAAAC,SAGAnB,cAAA,WACA,IAAAQ,EAAAT,KACA,IAAAS,EAAAb,UACAa,EAAAZ,QAAA,CACAY,EAAAb,SAAA,EACA,IAAAyB,GAAA5B,KAAAgB,EAAAhB,KAAAC,MAAAe,EAAAf,OACMiB,OAAAC,EAAA,EAAAD,CAANU,GAAAR,KAAA,SAAAM,GACAV,EAAAb,SAAA,EAEAa,EAAAd,YAAA2B,KAAAC,MAAAd,EAAAd,YAAAwB,EAAA3B,MACAiB,EAAAZ,QAAAsB,EAAA3B,KAAAgC,OAAAf,EAAAf,MACAe,EAAAhB,KAAAgB,EAAAhB,KAAA,QC5FegC,GADEC,OAFjB,WAA0B,IAAAC,EAAA3B,KAAa4B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,IAAA,cAAgBL,EAAAhC,YAAA6B,OAAA,EAAAM,EAAA,OAAyCG,YAAA,eAA0BN,EAAAO,GAAAP,EAAA,qBAAAQ,EAAA3B,GAA+C,OAAAsB,EAAA,OAAiBM,IAAA5B,EAAAyB,YAAA,qCAAyDH,EAAA,OAAYG,YAAA,QAAAI,MAAAF,EAAArB,OAAA,iBAAyDa,EAAAW,GAAA,eAAAR,EAAA,QAAmCG,YAAA,QAAkBN,EAAAW,GAAAX,EAAAY,GAAAJ,EAAAK,mBAAAb,EAAAW,GAAA,KAAAR,EAAA,OAA8DG,YAAA,SAAmBH,EAAA,OAAYG,YAAA,oBAA8BN,EAAAW,GAAA,kBAAAX,EAAAY,GAAAJ,EAAAM,eAAA,mBAAAd,EAAAW,GAAA,KAAAR,EAAA,OAA+FG,YAAA,sCAAgD,IAAAE,EAAAO,SAAAZ,EAAA,OAAAH,EAAAW,GAAA,iBAAAX,EAAAY,GAAAJ,EAAAQ,WAAAR,EAAAQ,WAAA,QAAAhB,EAAAY,GAAAJ,EAAAO,UAAA,kBAAAZ,EAAA,OAAAH,EAAAW,GAAA,SAAAX,EAAAW,GAAA,UAAAH,EAAArB,OAAAgB,EAAA,OAA8NG,YAAA,aAAuBN,EAAAW,GAAA,aAAAH,EAAArB,OAAAgB,EAAA,OAAgDG,YAAA,aAAuBN,EAAAW,GAAA,SAAAR,EAAA,OAA4BG,YAAA,mBAAAW,IAAmCC,MAAA,SAAAC,GAAyB,OAAAnB,EAAArB,UAAA6B,EAAA5B,GAAAC,OAAuCmB,EAAAW,GAAA,4CAAmD,GAAAX,EAAAoB,KAAApB,EAAAW,GAAA,KAAAR,EAAA,WAAwCkB,OAAOC,OAAAtB,EAAA9B,QAAAD,QAAA+B,EAAA/B,WAA4C+B,EAAAW,GAAA,SAAAX,EAAAhC,YAAA6B,QAAAG,EAAAlC,KAAA,EAAAqC,EAAA,OAAuEG,YAAA,gBAA0BN,EAAAuB,GAAA,KAAAvB,EAAAoB,MAAA,IAEn1CI,iBADjB,WAAoC,IAAavB,EAAb5B,KAAa6B,eAA0BC,EAAvC9B,KAAuC+B,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBG,YAAA,cAAwBH,EAAA,OAAYG,YAAA,QAAAe,OAA2BI,IAAMC,EAAQ,gBCajMC,EAdyBD,EAAQ,OAcjCE,CACEpE,EACAsC,GATF,EAEA,KAEA,KAEA,MAUe+B,EAAA,QAAAF,EAAiB","file":"static/js/40.6e3f1441cf1823779b79.js","sourcesContent":["<template>\n  <div ref=\"container\">\n    <div class=\"coupon-list\" v-if=\"couponsList.length > 0\">\n      <div\n        class=\"item acea-row row-center-wrapper\"\n        v-for=\"(item, index) in couponsList\"\n        :key=\"index\"\n      >\n        <div class=\"money\" :class=\"item.is_use ? 'moneyGray' : ''\">\n          ￥<span class=\"num\">{{ item.coupon_price }}</span>\n        </div>\n        <div class=\"text\">\n          <div class=\"condition line1\">\n            购物满{{ item.use_min_price }}元可用\n          </div>\n          <div class=\"data acea-row row-between-wrapper\">\n            <div v-if=\"item.end_time !== 0\">\n              {{ item.start_time ? item.start_time + \"-\" : \"\"\n              }}{{ item.end_time }}\n            </div>\n            <div v-else>不限时</div>\n            <div class=\"bnt gray\" v-if=\"item.is_use === true\">已领取</div>\n            <div class=\"bnt gray\" v-else-if=\"item.is_use === 2\">已领完</div>\n            <div\n              class=\"bnt bg-color-red\"\n              v-else\n              @click=\"getCoupon(item.id, index)\"\n            >\n              立即领取\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <Loading :loaded=\"loadend\" :loading=\"loading\"></Loading>\n    <!--暂无优惠券-->\n    <div\n      class=\"noCommodity\"\n      v-cloak\n      v-if=\"couponsList.length === 0 && page > 1\"\n    >\n      <div class=\"noPictrue\">\n        <img src=\"@assets/images/noCoupon.png\" class=\"image\" />\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { getCoupon, getCouponReceive } from \"@api/user\";\nimport Loading from \"@components/Loading\";\nexport default {\n  name: \"getCoupon\",\n  components: {\n    Loading\n  },\n  props: {},\n  data: function() {\n    return {\n      page: 1,\n      limit: 10,\n      couponsList: [],\n      loading: false,\n      loadend: false\n    };\n  },\n  mounted: function() {\n    this.getUseCoupons();\n    this.$scroll(this.$refs.container, () => {\n      !this.loading && this.getUseCoupons();\n    });\n  },\n  methods: {\n    getCoupon: function(id, index) {\n      let that = this;\n      let list = that.couponsList;\n      getCouponReceive(id)\n        .then(function() {\n          list[index].is_use = true;\n          that.$dialog.toast({ mes: \"领取成功\" });\n        })\n        .catch(function(res) {\n          that.$dialog.toast({ mes: res.msg });\n        });\n    },\n    getUseCoupons: function() {\n      let that = this;\n      if (that.loading) return; //阻止下次请求（false可以进行请求）；\n      if (that.loadend) return; //阻止结束当前请求（false可以进行请求）；\n      that.loading = true;\n      let q = { page: that.page, limit: that.limit };\n      getCoupon(q).then(res => {\n        that.loading = false;\n        //apply();js将一个数组插入另一个数组;\n        that.couponsList.push.apply(that.couponsList, res.data);\n        that.loadend = res.data.length < that.limit; //判断所有数据是否加载完成；\n        that.page = that.page + 1;\n      });\n    }\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/coupon/GetCoupon.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\"},[(_vm.couponsList.length > 0)?_c('div',{staticClass:\"coupon-list\"},_vm._l((_vm.couponsList),function(item,index){return _c('div',{key:index,staticClass:\"item acea-row row-center-wrapper\"},[_c('div',{staticClass:\"money\",class:item.is_use ? 'moneyGray' : ''},[_vm._v(\"\\n        ￥\"),_c('span',{staticClass:\"num\"},[_vm._v(_vm._s(item.coupon_price))])]),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[_c('div',{staticClass:\"condition line1\"},[_vm._v(\"\\n          购物满\"+_vm._s(item.use_min_price)+\"元可用\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"data acea-row row-between-wrapper\"},[(item.end_time !== 0)?_c('div',[_vm._v(\"\\n            \"+_vm._s(item.start_time ? item.start_time + \"-\" : \"\")+_vm._s(item.end_time)+\"\\n          \")]):_c('div',[_vm._v(\"不限时\")]),_vm._v(\" \"),(item.is_use === true)?_c('div',{staticClass:\"bnt gray\"},[_vm._v(\"已领取\")]):(item.is_use === 2)?_c('div',{staticClass:\"bnt gray\"},[_vm._v(\"已领完\")]):_c('div',{staticClass:\"bnt bg-color-red\",on:{\"click\":function($event){return _vm.getCoupon(item.id, index)}}},[_vm._v(\"\\n            立即领取\\n          \")])])])])}),0):_vm._e(),_vm._v(\" \"),_c('Loading',{attrs:{\"loaded\":_vm.loadend,\"loading\":_vm.loading}}),_vm._v(\" \"),(_vm.couponsList.length === 0 && _vm.page > 1)?_c('div',{staticClass:\"noCommodity\"},[_vm._m(0)]):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"noPictrue\"},[_c('img',{staticClass:\"image\",attrs:{\"src\":require(\"@assets/images/noCoupon.png\")}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-4964aa72\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/user/coupon/GetCoupon.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./GetCoupon.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./GetCoupon.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4964aa72\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./GetCoupon.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/coupon/GetCoupon.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}