webpackJsonp([40],{"7X9+":function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=n("vMJZ"),e={name:"getCoupon",components:{Loading:n("NxGh").a},props:{},data:function(){return{page:1,limit:10,couponsList:[],loading:!1,loadend:!1}},mounted:function(){var t=this;this.getUseCoupons(),this.$scroll(this.$refs.container,function(){!t.loading&&t.getUseCoupons()})},methods:{getCoupon:function(t,s){var n=this,e=n.couponsList;Object(i.u)(t).then(function(){e[s].is_use=!0,n.$dialog.toast({mes:"领取成功"})}).catch(function(t){n.$dialog.toast({mes:t.msg})})},getUseCoupons:function(){var t=this;if(!t.loading&&!t.loadend){t.loading=!0;var s={page:t.page,limit:t.limit};Object(i.t)(s).then(function(s){t.loading=!1,t.couponsList.push.apply(t.couponsList,s.data),t.loadend=s.data.length<t.limit,t.page=t.page+1})}}}},a={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{ref:"container"},[t.couponsList.length>0?n("div",{staticClass:"coupon-list"},t._l(t.couponsList,function(s,i){return n("div",{key:i,staticClass:"item acea-row row-center-wrapper"},[n("div",{staticClass:"money",class:s.is_use?"moneyGray":""},[t._v("\n        ￥"),n("span",{staticClass:"num"},[t._v(t._s(s.coupon_price))])]),t._v(" "),n("div",{staticClass:"text"},[n("div",{staticClass:"condition line1"},[t._v("\n          购物满"+t._s(s.use_min_price)+"元可用\n        ")]),t._v(" "),n("div",{staticClass:"data acea-row row-between-wrapper"},[0!==s.end_time?n("div",[t._v("\n            "+t._s(s.start_time?s.start_time+"-":"")+t._s(s.end_time)+"\n          ")]):n("div",[t._v("不限时")]),t._v(" "),!0===s.is_use?n("div",{staticClass:"bnt gray"},[t._v("已领取")]):2===s.is_use?n("div",{staticClass:"bnt gray"},[t._v("已领完")]):n("div",{staticClass:"bnt bg-color-red",on:{click:function(n){return t.getCoupon(s.id,i)}}},[t._v("\n            立即领取\n          ")])])])])}),0):t._e(),t._v(" "),n("Loading",{attrs:{loaded:t.loadend,loading:t.loading}}),t._v(" "),0===t.couponsList.length&&t.page>1?n("div",{staticClass:"noCommodity"},[t._m(0)]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"noPictrue"},[s("img",{staticClass:"image",attrs:{src:n("k/k8")}})])}]},o=n("C7Lr")(e,a,!1,null,null,null);s.default=o.exports}});
//# sourceMappingURL=40.6e3f1441cf1823779b79.js.map