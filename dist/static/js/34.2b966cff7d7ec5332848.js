webpackJsonp([34],{Lpcx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("lC5x"),c=a.n(n),r=a("J0Oq"),o=a.n(r),s=a("fUgm"),i=a("O9vy"),u=a("E4LH"),l=a("pN0x"),d=a("vMJZ"),p={name:"BindingPhone",components:{},props:{},data:function(){return{captcha:"",phone:""}},mixins:[i.a],computed:Object(s.b)(["userInfo"]),mounted:function(){},methods:{confirm:function(){var e=this;return o()(c.a.mark(function t(){var a,n,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(a=e).phone,r=a.captcha,t.prev=2,t.next=5,a.$validator({phone:[Object(u.b)(u.b.message("手机号码")),Object(u.a)(u.a.message())],captcha:[Object(u.d)(u.d.message("验证码")),Object(u.a)(u.a.message("验证码"))]}).validate({phone:n,captcha:r});case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",Object(l.b)(t.t0));case 10:Object(d.a)({phone:e.phone,captcha:e.captcha}).then(function(t){void 0!==t.data&&t.data.is_bind?a.$dialog.confirm({mes:t.msg,opts:[{txt:"确认绑定",color:!1,callback:function(){Object(d.a)({phone:e.phone,captcha:e.captcha,step:1}).then(function(e){a.$dialog.success(e.msg).then(function(){a.$router.replace({name:"PersonalData"})})}).catch(function(e){a.$dialog.error(e.msg).then(function(){a.$router.replace({name:"PersonalData"})})})}},{txt:"取消",color:!1,callback:function(){a.$dialog.error("已取消绑定").then(function(){a.$router.replace({name:"PersonalData"})})}}]}):a.$dialog.success(t.msg).then(function(){a.$router.replace({name:"PersonalData"})})}).catch(function(e){a.$dialog.error(e.msg)});case 11:case"end":return t.stop()}},t,e,[[2,7]])}))()},code:function(){var e=this;return o()(c.a.mark(function t(){var a,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(a=e).phone,t.prev=2,t.next=5,a.$validator({phone:[Object(u.d)(u.d.message("手机号码")),Object(u.b)(u.b.message())]}).validate({phone:n});case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return",Object(l.b)(t.t0));case 10:Object(d.Z)({phone:n}).then(function(e){a.$dialog.success(e.msg),a.sendCode()}).catch(function(e){a.$dialog.error(e.msg)});case 11:case"end":return t.stop()}},t,e,[[2,7]])}))()}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ChangePassword"},[a("div",{staticClass:"list"},[a("div",{staticClass:"item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"number",placeholder:"填写手机号码"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"item acea-row row-between-wrapper"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.captcha,expression:"captcha"}],staticClass:"codeIput",attrs:{type:"text",placeholder:"填写验证码"},domProps:{value:e.captcha},on:{input:function(t){t.target.composing||(e.captcha=t.target.value)}}}),e._v(" "),a("button",{staticClass:"code font-color-red",class:!0===e.disabled?"on":"",attrs:{disabled:e.disabled},on:{click:e.code}},[e._v("\n        "+e._s(e.text)+"\n      ")])])]),e._v(" "),a("div",{staticClass:"confirmBnt bg-color-red",on:{click:e.confirm}},[e._v("确认绑定")])])},staticRenderFns:[]},m=a("C7Lr")(p,h,!1,null,null,null);t.default=m.exports},O9vy:function(e,t,a){"use strict";t.a={data:function(){return{disabled:!1,text:"获取验证码"}},methods:{sendCode:function(){var e=this;if(!this.disabled){this.disabled=!0;var t=60;this.text="剩余 "+t+"s";var a=setInterval(function(){(t-=1)<0&&clearInterval(a),e.text="剩余 "+t+"s",e.text<"剩余 0s"&&(e.disabled=!1,e.text="重新获取")},1e3)}}}}}});
//# sourceMappingURL=34.2b966cff7d7ec5332848.js.map