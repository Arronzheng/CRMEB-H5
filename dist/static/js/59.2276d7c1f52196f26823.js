webpackJsonp([59,64],{FWz8:function(t,e,n){"use strict";e.l=function(t){return a.a.post("/order/confirm",{cartId:t})},e.k=function(t,e){return a.a.post("/order/computed/"+t,e)},e.e=function(t){return a.a.get("/coupons/order/"+(parseFloat(t)||0))},e.b=function(t){return a.a.post("/course/auth/order/info/pay",t,{login:!0})},e.f=function(){return a.a.get("/order/data")},e.g=function(t){return a.a.get("/order/list",t)},e.a=function(t){return a.a.post("/order/cancel",{id:t})},e.i=function(t){return a.a.get("/order/detail/"+t)},e.h=function(){return a.a.get("/order/refund/reason")},e.m=function(t){return a.a.post("/order/refund/verify",t)},e.n=function(t){return a.a.post("/order/take",{uni:t})},e.c=function(t){return a.a.post("/order/del",{uni:t})},e.d=function(t){return a.a.get("order/express/"+t)},e.j=function(t,e,n){return a.a.post("order/pay",{uni:t,paytype:e,from:n})};var a=n("vLgD")},Ik14:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("4YfN"),r=n.n(a),i=n("Ty/O"),o=n("FWz8"),s=n("0xDb"),c=n("fUgm"),u={name:"ProductWindow",props:{attr:{type:Object,default:function(){}},assembleCourse:{type:Object,default:function(){}}},watch:{"attr.couponList":function(t){this.coupons=t}},computed:r()({},Object(c.b)(["userNo"])),data:function(){return{order:{channelType:1,courseId:0,payType:1,tradeType:"JSAPI",remarkCus:""},couponIndex:0,couponPrice:0}},mounted:function(){this.couponPrice=this.attr.couponList[0].couponPrice},methods:{selCoupon:function(t,e){this.couponIndex=t,this.couponPrice=e},closeAttr:function(){this.$emit("changeFun",{action:"changeattr",value:!1})},goPay:function(){var t=this;if(t.order.courseId=this.assembleCourse.productId,!Object(s.d)())return this.$dialog.error("请在微信中使用支付功能！");Object(o.b)(t.order).then(function(e){200===e.code&&(void 0===window.WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",t.onBridgeReady(e.data),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",t.onBridgeReady(e.data)),document.attachEvent("onWeixinJSBridgeReady",t.onBridgeReady(e.data))):t.onBridgeReady(e.data))}).catch(function(e){t.$dialog.error(e.msg)})},handlePaid:function(){var t=this,e=void 0;this.attr.assembleDtail&&(e=this.attr.assembleDtail.assembleId);var n={uid:this.userNo,price:this.attr.price,totalPrice:this.attr.price-this.couponPrice,cid:this.assembleCourse.id,pid:this.assembleCourse.productId,assembleId:e};Object(i.a)(n).then(function(e){200===e.code&&t.$router.push({path:"/order/status/1/5"})}).catch(function(t){})},goBargain:function(){var t=this,e=this,n={uid:this.userNo,bargainId:this.attr.bargainId,bargainPrice:this.attr.bargainPrice};Object(i.f)(n).then(function(e){200===e.code&&t.$router.push("/activity/bargain/"+e.data.id)}).catch(function(t){e.$dialog.error(t.msg)})},onBridgeReady:function(t){var e=this;window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:"prepay_id="+t.prepayId,signType:t.signType,paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg&&e.handlePaid()})}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"payment",class:!0===t.attr.cartAttr?"up":""},[n("div",{staticClass:"title"},[n("span",{staticClass:"iconfont icon-guanbi",on:{click:t.closeAttr}}),t._v("\n        付款详情\n      ")]),t._v(" "),n("div",{staticClass:"total acea-row row-between-wrapper"},[n("div",[t._v("支付总额")]),t._v(" "),t.attr.isBargain?n("div",{staticClass:"money"},[t._v("¥0")]):t.attr.isAssemble?n("div",{staticClass:"money"},[t._v("¥"+t._s(t.attr.price))]):n("div",{staticClass:"money"},[t._v("¥"+t._s(t.attr.price-t.couponPrice))])]),t._v(" "),!t.attr.isAssemble&&!t.attr.isBargain&&t.attr.couponList.length>0?n("div",{staticClass:"mode"},[t._v("优惠券")]):t._e(),t._v(" "),!t.attr.isAssemble&&!t.attr.isBargain&&t.attr.couponList.length>0?n("div",{staticClass:"select-btn",staticStyle:{height:"auto",overflow:"auto"}},[n("div",{staticClass:"checkbox-wrapper",class:t.couponIndex===t.attr.couponList.length?"on":"",on:{click:function(e){return t.selCoupon(t.attr.couponList.length,0)}}},[t._m(0)]),t._v(" "),t._l(t.attr.couponList,function(e,a){return e.useMinPrice<=t.attr.price?n("div",{key:a},[n("div",{staticClass:"checkbox-wrapper",class:t.couponIndex===a?"on":"",on:{click:function(n){return t.selCoupon(a,e.couponPrice)}}},[n("label",{staticClass:"well-check"},[n("span",{staticClass:"iconfont icon-youhuiquan",staticStyle:{color:"rgb(252, 153, 44)"}}),t._v(" "),n("span",{staticClass:"sex"},[t._v(t._s(e.couponTitle)+t._s(e.couponPrice))])])])]):t._e()})],2):t._e(),t._v(" "),t.attr.isBargain?n("div",{staticClass:"payBnt",on:{click:t.goBargain}},[t._v("开始砍价")]):n("div",{staticClass:"payBnt",on:{click:t.goPay}},[t._v("确认支付")])]),t._v(" "),n("div",{staticClass:"mask",attrs:{hidden:!1===t.attr.cartAttr},on:{touchmove:function(t){t.preventDefault()},click:t.closeAttr}})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"well-check"},[e("span",{staticClass:"iconfont icon-youhuiquan",staticStyle:{color:"gray"}}),this._v(" "),e("span",{staticClass:"sex"},[this._v("不使用优惠券")])])}]},l=n("C7Lr")(u,d,!1,null,null,null);e.default=l.exports},"Ty/O":function(t,e,n){"use strict";e.a=function(t){return a.a.post("/course/auth/assemble/save",t)},e.b=function(t){return a.a.post("/course/auth/assemble/record",t)},e.g=function(){return a.a.get("/seckill/index",{},{login:!1})},e.i=function(t,e){return a.a.get("/seckill/list/"+t,e,{login:!1})},e.h=function(t){return a.a.get("/seckill/detail/"+t,{},{login:!1})},e.c=function(t){return a.a.post("/course/auth/bargain/view",t)},e.f=function(t){return a.a.post("/course/auth/bargain/save",t)},e.j=function(t){return a.a.post("/course/auth/bargain/help",t)},e.d=function(t){return a.a.post("/course/auth/bargain/user/getBargainHelpByUid",t)},e.e=function(t){return a.a.post("/course/auth/bargain/record",t)};var a=n("vLgD")}});
//# sourceMappingURL=59.2276d7c1f52196f26823.js.map